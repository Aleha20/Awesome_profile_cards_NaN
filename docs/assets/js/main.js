"use strict";const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){data.image=fr.result,profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const header1=document.querySelector(".js-header1"),header2=document.querySelector(".js-header2"),header3=document.querySelector(".js-header3"),content1=document.querySelector(".js-content1"),content2=document.querySelector(".js-content2"),content3=document.querySelector(".js-content3");function collapse1(){content1.classList.toggle("collapsed"),content1.classList.contains("collapsed")||(content2.classList.add("collapsed"),content3.classList.add("collapsed"))}function collapse2(){content2.classList.toggle("collapsed"),content2.classList.contains("collapsed")||(content1.classList.add("collapsed"),content3.classList.add("collapsed"))}function collapse3(){content3.classList.toggle("collapsed"),content3.classList.contains("collapsed")||(content1.classList.add("collapsed"),content2.classList.add("collapsed"))}header1.addEventListener("click",collapse1),header2.addEventListener("click",collapse2),header3.addEventListener("click",collapse3);const inputList=document.querySelectorAll(".js-field");let data={name:"Nombre Apellido",job:"Front-end developer",phone:"#",email:"#",linkedin:"#",github:"#",photo:"",palette:1};const previewText=document.querySelectorAll(".js-preview-text");console.log(previewText);const nameInit=previewText[0].innerHTML;console.log("Esto es nameInit "+nameInit);const jobInit=previewText[1].innerHTML;console.log("Esto es jobInit "+jobInit);const previewHref=document.querySelectorAll(".js-preview-href");console.log(previewHref);const hrefInit="#";function getInfo(e){data[e.currentTarget.id]=e.currentTarget.value,paint(),storeData()}function paint(){previewText[0].innerHTML=data.name||nameInit,previewText[1].innerHTML=data.job||jobInit,previewHref[0].href="tel:"+data.phone||"#",previewHref[1].href="mailto:"+data.email||"#",previewHref[2].href="https://"+data.linkedin||"#",previewHref[3].href="https://github.com/"+data.github||"#"}chargeData();for(const e of inputList)e.addEventListener("keyup",getInfo);const btnReset=document.querySelector(".js-reset");function handleReset(){console.log("reset"),data.name=nameInit,data.job=jobInit,data.phone="#",data.email="#",data.linkedin="#",data.github="#",console.log(data);for(const e of inputList)e.value="";paint(),storeData()}function storeData(){console.log("guarda");const e=JSON.stringify(data);localStorage.setItem("filledData",e),console.log(e)}function chargeData(){console.log("carga");const e=localStorage.getItem("filledData");console.log(e);const t=JSON.parse(e);null!==t&&(data=t),console.log(t),paint()}btnReset.addEventListener("click",handleReset);const submitButton=document.querySelector(".js-submit"),responseURL=document.querySelector(".js-response"),form=document.querySelector(".js-form");function sendData(){sendRequest(data)}function sendRequest(){console.log("entro en funcion antes de fetch"),fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(data),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){showURL(e)})).catch((function(e){console.log(e)}))}const hiddenBox=document.querySelector(".js-share-url");function showURL(e){e.success?(responseURL.innerHTML=e.cardURL,responseURL.href=e.cardURL,hiddenBox.classList.remove("hidden")):responseURL.innerHTML="ERROR:"+e.error}submitButton.addEventListener("click",sendRequest);